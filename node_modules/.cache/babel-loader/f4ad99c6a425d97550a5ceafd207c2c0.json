{"remainingRequest":"/home/adam/Desktop/sankycash/node_modules/thread-loader/dist/cjs.js!/home/adam/Desktop/sankycash/node_modules/babel-loader/lib/index.js!/home/adam/Desktop/sankycash/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/adam/Desktop/sankycash/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/adam/Desktop/sankycash/src/components/Investments/AddInvestment.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/adam/Desktop/sankycash/src/components/Investments/AddInvestment.vue","mtime":1599457065397},{"path":"/home/adam/Desktop/sankycash/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/adam/Desktop/sankycash/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/adam/Desktop/sankycash/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/adam/Desktop/sankycash/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/adam/Desktop/sankycash/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IHV0aWwgZnJvbSAnLi4vLi4vdXRpbC5qcyc7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnQWRkSW52ZXN0bWVudCcsCiAgcHJvcHM6IFsndW5hbGxvY2F0ZWRTdW0nLCAnbW9kZScsICdpbnZlc3RtZW50JywgJ3RpbWVsaW5lJ10sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIC8vIG5ldyBpbnZlc3RtZW50CiAgICAgIGxhYmVsOiAnJywKICAgICAgdmFsdWU6ICcnCiAgICB9OwogIH0sCiAgbWV0aG9kczogewogICAgYWRkSW52ZXN0bWVudDogZnVuY3Rpb24gYWRkSW52ZXN0bWVudChlKSB7CiAgICAgIGlmIChlKSBlLnByZXZlbnREZWZhdWx0KCk7CiAgICAgIHRoaXMudmFsdWUgPSBwYXJzZUludCh0aGlzLnZhbHVlKTsgLy8gdmFsaWRhdGUKCiAgICAgIGlmIChpc05hTih0aGlzLnZhbHVlKSB8fCB0aGlzLnZhbHVlIDwgMCkgewogICAgICAgIGFsZXJ0KHRoaXMuJHQoJ2ludmVzdG1lbnRzLnZhbHVlX2Vycm9yJykpOwogICAgICAgIHJldHVybjsKICAgICAgfSAvLyBtYWtlIHN1cmUgaXQncyBpbiB0aGUgYnVkZ2V0IGJ1dCB0YWtlIGludG8gYWNjb3VudCBlZGl0IG1vZGUKCgogICAgICB2YXIgZXJyID0gdGhpcy5pbnZlc3RtZW50ID8gJ2RpZmZlcmVuY2VfZXJyb3JfZWRpdCcgOiAnZGlmZmVyZW5jZV9lcnJvcl9hZGQnOwogICAgICB2YXIgdmFsdWUgPSB0aGlzLmludmVzdG1lbnQgPyB0aGlzLnZhbHVlIC0gdGhpcy5pbnZlc3RtZW50LnZhbHVlIDogdGhpcy52YWx1ZTsKCiAgICAgIGlmICh2YWx1ZSA+IHRoaXMudW5hbGxvY2F0ZWRTdW0pIHsKICAgICAgICB2YXIgZXJyb3IgPSB0aGlzLiR0KCJpbnZlc3RtZW50cy4iLmNvbmNhdChlcnIpLCB7CiAgICAgICAgICBidWRnZXQ6IHV0aWwuZm9ybWF0TW9uZXkodGhpcy51bmFsbG9jYXRlZFN1bSwgdGhpcy5tb2RlKQogICAgICAgIH0pOwogICAgICAgIGFsZXJ0KGVycm9yKTsKICAgICAgICByZXR1cm47CiAgICAgIH0gLy8gZW1pdAoKCiAgICAgIHRoaXMuJGVtaXQoJ2FkZEludmVzdG1lbnQnLCB7CiAgICAgICAgbGFiZWw6IHRoaXMubGFiZWwsCiAgICAgICAgdmFsdWU6IHRoaXMudmFsdWUKICAgICAgfSk7IC8vIHJlc2V0CgogICAgICB0aGlzLmxhYmVsID0gJyc7CiAgICAgIHRoaXMudmFsdWUgPSAnJzsKICAgICAgdGhpcy5mb2N1c05ld0ludmVzdG1lbnQoKTsKICAgIH0sCiAgICBjYW5jZWxFZGl0OiBmdW5jdGlvbiBjYW5jZWxFZGl0KCkgewogICAgICB0aGlzLiRlbWl0KCdlZGl0SW52ZXN0bWVudCcsIGZhbHNlKTsKICAgIH0sCiAgICBwb3B1bGF0ZUludmVzdG1lbnQ6IGZ1bmN0aW9uIHBvcHVsYXRlSW52ZXN0bWVudCgpIHsKICAgICAgdGhpcy52YWx1ZSA9IHRoaXMudW5hbGxvY2F0ZWRTdW07CiAgICB9LAogICAgZm9jdXNOZXdJbnZlc3RtZW50OiBmdW5jdGlvbiBmb2N1c05ld0ludmVzdG1lbnQoKSB7CiAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCduZXctaW52ZXN0bWVudC1mb2N1cycpLmZvY3VzKCk7CiAgICB9CiAgfSwKICBjb21wdXRlZDogewogICAgc3VibWl0VGV4dDogZnVuY3Rpb24gc3VibWl0VGV4dCgpIHsKICAgICAgcmV0dXJuIHRoaXMuaW52ZXN0bWVudCA/IHRoaXMuJHQoJ2ludmVzdG1lbnRzLnVwZGF0ZScpIDogdGhpcy4kdCgnaW52ZXN0bWVudHMuYWRkJyk7CiAgICB9LAogICAgYW1vdW50RXhhbXBsZXM6IGZ1bmN0aW9uIGFtb3VudEV4YW1wbGVzKCkgewogICAgICB2YXIgdGltZWxpbmUgPSB0aGlzLnRpbWVsaW5lID09ICdhbm51YWwnID8gJ2NvbW1vbi5hbm51YWwnIDogJ2NvbW1vbi5tb250aGx5JzsKICAgICAgcmV0dXJuIHRoaXMuJHQoJ2ludmVzdG1lbnRzLmFtb3VudF9leGFtcGxlcycsIHsKICAgICAgICBtb2RlOiB0aGlzLm1vZGUsCiAgICAgICAgdGltZWxpbmU6IHRoaXMuJHQodGltZWxpbmUpCiAgICAgIH0pOwogICAgfQogIH0sCiAgd2F0Y2g6IHsKICAgIGludmVzdG1lbnQ6IGZ1bmN0aW9uIGludmVzdG1lbnQoKSB7CiAgICAgIHRoaXMudmFsdWUgPSB0aGlzLmludmVzdG1lbnQgPyB0aGlzLmludmVzdG1lbnQudmFsdWUgOiAnJzsKICAgICAgdGhpcy5sYWJlbCA9IHRoaXMuaW52ZXN0bWVudCA/IHRoaXMuaW52ZXN0bWVudC5sYWJlbCA6ICcnOwogICAgfQogIH0KfTs="},{"version":3,"sources":["AddInvestment.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6CA,OAAA,IAAA,MAAA,eAAA;AAEA,eAAA;AACA,EAAA,IAAA,EAAA,eADA;AAEA,EAAA,KAAA,EAAA,CAAA,gBAAA,EAAA,MAAA,EAAA,YAAA,EAAA,UAAA,CAFA;AAGA,EAAA,IAHA,kBAGA;AACA,WAAA;AACA;AACA,MAAA,KAAA,EAAA,EAFA;AAGA,MAAA,KAAA,EAAA;AAHA,KAAA;AAKA,GATA;AAUA,EAAA,OAAA,EAAA;AACA,IAAA,aAAA,EAAA,uBAAA,CAAA,EAAA;AACA,UAAA,CAAA,EAAA,CAAA,CAAA,cAAA;AACA,WAAA,KAAA,GAAA,QAAA,CAAA,KAAA,KAAA,CAAA,CAFA,CAIA;;AACA,UAAA,KAAA,CAAA,KAAA,KAAA,CAAA,IAAA,KAAA,KAAA,GAAA,CAAA,EAAA;AACA,QAAA,KAAA,CAAA,KAAA,EAAA,CAAA,yBAAA,CAAA,CAAA;AACA;AACA,OARA,CAUA;;;AACA,UAAA,GAAA,GAAA,KAAA,UAAA,GAAA,uBAAA,GAAA,sBAAA;AACA,UAAA,KAAA,GAAA,KAAA,UAAA,GAAA,KAAA,KAAA,GAAA,KAAA,UAAA,CAAA,KAAA,GAAA,KAAA,KAAA;;AACA,UAAA,KAAA,GAAA,KAAA,cAAA,EAAA;AACA,YAAA,KAAA,GAAA,KAAA,EAAA,uBAAA,GAAA,GAAA;AACA,UAAA,MAAA,EAAA,IAAA,CAAA,WAAA,CAAA,KAAA,cAAA,EAAA,KAAA,IAAA;AADA,SAAA,CAAA;AAGA,QAAA,KAAA,CAAA,KAAA,CAAA;AACA;AACA,OAnBA,CAqBA;;;AACA,WAAA,KAAA,CAAA,eAAA,EAAA;AACA,QAAA,KAAA,EAAA,KAAA,KADA;AAEA,QAAA,KAAA,EAAA,KAAA;AAFA,OAAA,EAtBA,CA2BA;;AACA,WAAA,KAAA,GAAA,EAAA;AACA,WAAA,KAAA,GAAA,EAAA;AAEA,WAAA,kBAAA;AACA,KAjCA;AAkCA,IAAA,UAAA,EAAA,sBAAA;AACA,WAAA,KAAA,CAAA,gBAAA,EAAA,KAAA;AACA,KApCA;AAqCA,IAAA,kBAAA,EAAA,8BAAA;AACA,WAAA,KAAA,GAAA,KAAA,cAAA;AACA,KAvCA;AAwCA,IAAA,kBAAA,EAAA,8BAAA;AACA,MAAA,QAAA,CAAA,cAAA,CAAA,sBAAA,EAAA,KAAA;AACA;AA1CA,GAVA;AAsDA,EAAA,QAAA,EAAA;AACA,IAAA,UAAA,EAAA,sBAAA;AACA,aAAA,KAAA,UAAA,GAAA,KAAA,EAAA,CAAA,oBAAA,CAAA,GAAA,KAAA,EAAA,CAAA,iBAAA,CAAA;AACA,KAHA;AAIA,IAAA,cAAA,EAAA,0BAAA;AACA,UAAA,QAAA,GAAA,KAAA,QAAA,IAAA,QAAA,GAAA,eAAA,GAAA,gBAAA;AACA,aAAA,KAAA,EAAA,CAAA,6BAAA,EAAA;AACA,QAAA,IAAA,EAAA,KAAA,IADA;AAEA,QAAA,QAAA,EAAA,KAAA,EAAA,CAAA,QAAA;AAFA,OAAA,CAAA;AAIA;AAVA,GAtDA;AAkEA,EAAA,KAAA,EAAA;AACA,IAAA,UAAA,EAAA,sBAAA;AACA,WAAA,KAAA,GAAA,KAAA,UAAA,GAAA,KAAA,UAAA,CAAA,KAAA,GAAA,EAAA;AACA,WAAA,KAAA,GAAA,KAAA,UAAA,GAAA,KAAA,UAAA,CAAA,KAAA,GAAA,EAAA;AACA;AAJA;AAlEA,CAAA","sourcesContent":["<template>\n    <form v-on:keydown.enter.prevent=\"\">\n        <!-- investment label -->\n        <div class=\"form-group\">\n            <label>{{ $t('common.chart_label') }}</label>\n            <input id=\"new-investment-focus\" v-model=\"label\" type=\"text\" class=\"form-control\" :placeholder=\"$t('common.label')\" v-on:keyup.enter=\"addInvestment()\">\n            <small class=\"form-text text-muted\">\n                {{ $t('investments.chart_label_examples') }}\n            </small>\n        </div>\n\n        <!-- investment amount -->\n        <div class=\"form-group\">\n            <label>{{ $t('common.amount') }}</label>\n            <input id=\"new-investment\" type=\"number\" class=\"form-control\" min=\"1\" v-model=\"value\" :placeholder=\"$t('common.amount')\" v-on:keyup.enter=\"addInvestment()\">\n            <small class=\"form-text text-muted\">\n                {{ amountExamples }}\n            </small>\n        </div>\n\n        <!-- desktop buttons: save, cancel -->\n        <div class=\"desktop-only-inline\">\n            <button v-if=\"investment\" class=\"btn btn-link\" v-on:keyup.enter=\"cancelEdit()\" v-on:click.enter.prevent=\"cancelEdit\">\n                {{ $t('common.cancel') }}\n            </button>\n            <button class=\"btn btn-primary\" v-on:keyup.enter=\"addInvestment()\" v-on:click.enter.prevent=\"addInvestment\">\n                {{ submitText }}\n            </button>\n        </div>\n\n        <!-- mobile buttons: save, cancel -->\n        <div class=\"mobile-only row\">\n            <br>\n            <button class=\"btn btn-primary col-sm-12\" v-on:keyup.enter=\"addInvestment()\" v-on:click.enter.prevent=\"addInvestment\">\n                {{ submitText }}\n            </button>\n            <button v-if=\"investment\" class=\"btn btn-outline-primary col-sm-12\" v-on:keyup.enter=\"cancelEdit()\" v-on:click.enter.prevent=\"cancelEdit\">\n                {{ $t('common.cancel') }}\n            </button>\n        </div>\n    </form>\n</template>\n\n\n<script>\nimport util from '../../util.js';\n\nexport default {\n    name: 'AddInvestment',\n    props: ['unallocatedSum', 'mode', 'investment', 'timeline'],\n    data () {\n        return {\n            // new investment\n            label: '',\n            value: '',\n        }\n    },\n    methods: {\n        addInvestment: function (e) {\n            if (e) e.preventDefault();\n            this.value = parseInt(this.value);\n\n            // validate\n            if (isNaN(this.value) || this.value < 0) {\n                alert(this.$t('investments.value_error'));\n                return;\n            }\n\n            // make sure it's in the budget but take into account edit mode\n            var err   = this.investment ? 'difference_error_edit' : 'difference_error_add';\n            var value = this.investment ? this.value - this.investment.value : this.value;\n            if (value > this.unallocatedSum) {\n                var error = this.$t(`investments.${err}`, {\n                    budget: util.formatMoney(this.unallocatedSum, this.mode)\n                });\n                alert(error);\n                return;\n            }\n\n            // emit\n            this.$emit('addInvestment', {\n                label: this.label,\n                value: this.value\n            });\n\n            // reset\n            this.label = '';\n            this.value = '';\n\n            this.focusNewInvestment();\n        },\n        cancelEdit: function () {\n            this.$emit('editInvestment', false);\n        },\n        populateInvestment: function () {\n            this.value = this.unallocatedSum;\n        },\n        focusNewInvestment: function () {\n            document.getElementById('new-investment-focus').focus();\n        },\n    },\n    computed: {\n        submitText: function () {\n            return this.investment ? this.$t('investments.update') : this.$t('investments.add');\n        },\n        amountExamples: function () {\n            var timeline = this.timeline == 'annual' ? 'common.annual' : 'common.monthly';\n            return this.$t('investments.amount_examples', {\n                mode: this.mode ,\n                timeline: this.$t(timeline)\n            });\n        }\n    },\n    watch: {\n        investment: function () {\n            this.value = this.investment ? this.investment.value : '';\n            this.label = this.investment ? this.investment.label : '';\n        }\n    }\n}\n\n</script>\n\n\n<style scoped>\n\n\n.desktop-only-inline {\n    float: right;\n    margin-top: calc(30px - 1rem);\n}\n\n.desktop-only-inline .remove-expense {\n    padding-left:5px;\n    padding-right:17px;\n    color:red;\n}\n\n.btn-outline-danger {\n    margin-top:5px;\n}\n\n.btn-outline-primary {\n    margin-top:5px;\n}\n\n\n</style>"],"sourceRoot":"src/components/Investments"}]}