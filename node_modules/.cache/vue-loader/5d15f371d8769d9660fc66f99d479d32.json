{"remainingRequest":"/home/adam/Desktop/sankycash/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/adam/Desktop/sankycash/src/components/Expenses/AddExpense.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/adam/Desktop/sankycash/src/components/Expenses/AddExpense.vue","mtime":1599457043472},{"path":"/home/adam/Desktop/sankycash/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/adam/Desktop/sankycash/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/adam/Desktop/sankycash/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/adam/Desktop/sankycash/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB1dGlsIGZyb20gJy4uLy4uL3V0aWwuanMnOwoKZXhwb3J0IGRlZmF1bHQgewogICAgbmFtZTogJ0FkZEV4cGVuc2UnLAogICAgcHJvcHM6IFsndW5hbGxvY2F0ZWRTdW0nLCAnbW9kZScsICdleHBlbnNlJywgJ3RpbWVsaW5lJ10sCiAgICBkYXRhICgpIHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgICAvLyBuZXcgaW5jb21lIHN0cmVhbQogICAgICAgICAgICBsYWJlbDogJycsCiAgICAgICAgICAgIHZhbHVlOiAnJywKICAgICAgICB9CiAgICB9LAogICAgbWV0aG9kczogewogICAgICAgIGFkZEV4cGVuc2U6IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgIGlmIChlKSBlLnByZXZlbnREZWZhdWx0KCk7CiAgICAgICAgICAgIHRoaXMudmFsdWUgPSBwYXJzZUludCh0aGlzLnZhbHVlKTsKCiAgICAgICAgICAgIC8vIHZhbGlkYXRlCiAgICAgICAgICAgIGlmIChpc05hTih0aGlzLnZhbHVlKSB8fCB0aGlzLnZhbHVlIDwgMCkgewogICAgICAgICAgICAgICAgYWxlcnQodGhpcy4kdCgnZXhwZW5zZXMudmFsdWVfZXJyb3InKSk7CiAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIC8vIG1ha2Ugc3VyZSBpdCdzIGluIHRoZSBidWRnZXQgYnV0IHRha2UgaW50byBhY2NvdW50IGVkaXQgbW9kZQogICAgICAgICAgICB2YXIgZXJyICAgPSB0aGlzLmV4cGVuc2UgPyAnZGlmZmVyZW5jZV9lcnJvcl9lZGl0JyA6ICdkaWZmZXJlbmNlX2Vycm9yX2FkZCc7CiAgICAgICAgICAgIHZhciB2YWx1ZSA9IHRoaXMuZXhwZW5zZSA/IHRoaXMudmFsdWUgLSB0aGlzLmV4cGVuc2UudmFsdWUgOiB0aGlzLnZhbHVlOwogICAgICAgICAgICBpZiAodmFsdWUgPiB0aGlzLnVuYWxsb2NhdGVkU3VtKSB7CiAgICAgICAgICAgICAgICB2YXIgZXJyb3IgPSB0aGlzLiR0KGBleHBlbnNlcy4ke2Vycn1gLCB7CiAgICAgICAgICAgICAgICAgICAgYnVkZ2V0OiB1dGlsLmZvcm1hdE1vbmV5KHRoaXMudW5hbGxvY2F0ZWRTdW0sIHRoaXMubW9kZSkKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgYWxlcnQoZXJyb3IpOwogICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICB9CgogICAgICAgICAgICAvLyBlbWl0CiAgICAgICAgICAgIHRoaXMuJGVtaXQoJ2FkZEV4cGVuc2UnLCB7CiAgICAgICAgICAgICAgICBsYWJlbDogdGhpcy5sYWJlbCwKICAgICAgICAgICAgICAgIHZhbHVlOiB0aGlzLnZhbHVlCiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgLy8gcmVzZXQKICAgICAgICAgICAgdGhpcy5sYWJlbCA9ICcnOwogICAgICAgICAgICB0aGlzLnZhbHVlID0gJyc7CgogICAgICAgICAgICB0aGlzLmZvY3VzTmV3RXhwZW5zZSgpOwogICAgICAgIH0sCiAgICAgICAgY2FuY2VsRWRpdDogZnVuY3Rpb24gKCkgewogICAgICAgICAgICB0aGlzLiRlbWl0KCdlZGl0RXhwZW5zZScsIGZhbHNlKTsKICAgICAgICB9LAogICAgICAgIGZvY3VzTmV3RXhwZW5zZTogZnVuY3Rpb24gKCkgewogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbmV3LWV4cGVuc2UtZm9jdXMnKS5mb2N1cygpOwogICAgICAgIH0sCiAgICAgICAgcHJvY2Vzc0tleVByZXNzOiBmdW5jdGlvbiAoZXZlbnQpIHsKICAgICAgICAgICAgaWYgKGV2ZW50LmtleUNvZGUgPT0gMTMpIHRoaXMuYWRkRXhwZW5zZSgpOwogICAgICAgIH0KICAgIH0sCiAgICBjb21wdXRlZDogewogICAgICAgIHN1Ym1pdFRleHQ6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgcmV0dXJuIHRoaXMuZXhwZW5zZSA/IHRoaXMuJHQoJ2V4cGVuc2VzLnVwZGF0ZScpIDogdGhpcy4kdCgnZXhwZW5zZXMuYWRkJyk7CiAgICAgICAgfSwKICAgICAgICBhbW91bnRFeGFtcGxlczogZnVuY3Rpb24gKCkgewogICAgICAgICAgICB2YXIgdGltZWxpbmUgPSB0aGlzLnRpbWVsaW5lID09ICdhbm51YWwnID8gJ2NvbW1vbi5hbm51YWwnIDogJ2NvbW1vbi5tb250aGx5JzsKICAgICAgICAgICAgcmV0dXJuIHRoaXMuJHQoJ2V4cGVuc2VzLmFtb3VudF9leGFtcGxlcycsIHsKICAgICAgICAgICAgICAgIG1vZGU6IHRoaXMubW9kZSAsCiAgICAgICAgICAgICAgICB0aW1lbGluZTogdGhpcy4kdCh0aW1lbGluZSkKICAgICAgICAgICAgfSk7CiAgICAgICAgfQogICAgfSwKICAgIHdhdGNoOiB7CiAgICAgICAgZXhwZW5zZTogZnVuY3Rpb24gKCkgewogICAgICAgICAgICB0aGlzLnZhbHVlID0gdGhpcy5leHBlbnNlID8gdGhpcy5leHBlbnNlLnZhbHVlIDogJyc7CiAgICAgICAgICAgIHRoaXMubGFiZWwgPSB0aGlzLmV4cGVuc2UgPyB0aGlzLmV4cGVuc2UubGFiZWwgOiAnJzsKICAgICAgICB9CiAgICB9Cn0KCg=="},{"version":3,"sources":["AddExpense.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6CA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"AddExpense.vue","sourceRoot":"src/components/Expenses","sourcesContent":["<template>\n    <form v-on:keydown.enter.prevent=\"\">\n        <!-- expense label -->\n        <div class=\"form-group\">\n            <label>{{ $t('common.chart_label') }}</label>\n            <input id=\"new-expense-focus\" v-model=\"label\" type=\"text\" class=\"form-control\" :placeholder=\"$t('common.label')\" v-on:keyup.enter=\"addExpense()\">\n            <small class=\"form-text text-muted\">\n                {{ $t('expenses.chart_label_examples') }}\n            </small>\n        </div>\n\n        <!-- income stream amount -->\n        <div class=\"form-group\">\n            <label>{{ $t('common.amount') }}</label>\n            <input type=\"number\" class=\"form-control\" min=\"1\" v-model=\"value\" :placeholder=\"$t('common.amount')\" v-on:keyup.enter=\"addExpense()\">\n            <small class=\"form-text text-muted\">\n                {{ amountExamples }}\n            </small>\n        </div>\n\n        <!-- desktop buttons: save, cancel -->\n        <div class=\"desktop-only-inline\">\n            <button v-if=\"expense\" class=\"btn btn-link\" v-on:click.enter.prevent=\"cancelEdit\" v-on:keyup.enter=\"cancelEdit()\">\n                {{ $t('common.cancel') }}\n            </button>\n            <button class=\"btn btn-primary\" v-on:click.enter.prevent=\"addExpense()\" v-on:keyup.enter=\"addExpense()\">\n                {{ submitText }}\n            </button>\n        </div>\n\n        <!-- mobile buttons: save, cancel -->\n        <div class=\"mobile-only row\">\n            <br>\n            <button class=\"btn btn-primary col-sm-12\" v-on:click.enter.prevent=\"addExpense()\" v-on:keyup.enter=\"addExpense()\">\n                {{ submitText }}\n            </button>\n            <button v-if=\"expense\" class=\"btn btn-outline-primary col-sm-12\" v-on:click.enter.prevent=\"cancelEdit\" v-on:keyup.enter=\"cancelEdit()\">\n                {{ $t('common.cancel') }}\n            </button>\n        </div>\n    </form>\n</template>\n\n\n<script>\nimport util from '../../util.js';\n\nexport default {\n    name: 'AddExpense',\n    props: ['unallocatedSum', 'mode', 'expense', 'timeline'],\n    data () {\n        return {\n            // new income stream\n            label: '',\n            value: '',\n        }\n    },\n    methods: {\n        addExpense: function (e) {\n            if (e) e.preventDefault();\n            this.value = parseInt(this.value);\n\n            // validate\n            if (isNaN(this.value) || this.value < 0) {\n                alert(this.$t('expenses.value_error'));\n                return;\n            }\n\n            // make sure it's in the budget but take into account edit mode\n            var err   = this.expense ? 'difference_error_edit' : 'difference_error_add';\n            var value = this.expense ? this.value - this.expense.value : this.value;\n            if (value > this.unallocatedSum) {\n                var error = this.$t(`expenses.${err}`, {\n                    budget: util.formatMoney(this.unallocatedSum, this.mode)\n                });\n                alert(error);\n                return;\n            }\n\n            // emit\n            this.$emit('addExpense', {\n                label: this.label,\n                value: this.value\n            });\n\n            // reset\n            this.label = '';\n            this.value = '';\n\n            this.focusNewExpense();\n        },\n        cancelEdit: function () {\n            this.$emit('editExpense', false);\n        },\n        focusNewExpense: function () {\n            document.getElementById('new-expense-focus').focus();\n        },\n        processKeyPress: function (event) {\n            if (event.keyCode == 13) this.addExpense();\n        }\n    },\n    computed: {\n        submitText: function () {\n            return this.expense ? this.$t('expenses.update') : this.$t('expenses.add');\n        },\n        amountExamples: function () {\n            var timeline = this.timeline == 'annual' ? 'common.annual' : 'common.monthly';\n            return this.$t('expenses.amount_examples', {\n                mode: this.mode ,\n                timeline: this.$t(timeline)\n            });\n        }\n    },\n    watch: {\n        expense: function () {\n            this.value = this.expense ? this.expense.value : '';\n            this.label = this.expense ? this.expense.label : '';\n        }\n    }\n}\n\n</script>\n\n<style scoped>\n\n\n.desktop-only-inline {\n    float: right;\n    margin-top: calc(30px - 1rem);\n}\n\n.desktop-only-inline .remove-expense {\n    padding-left:5px;\n    padding-right:17px;\n    color:red;\n}\n\n.btn-outline-danger {\n    margin-top:5px;\n}\n\n.btn-outline-primary {\n    margin-top:5px;\n}\n\n\n</style>"]}]}